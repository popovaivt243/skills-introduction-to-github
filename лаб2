import random
from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import Application, CommandHandler, MessageHandler, filters, CallbackContext


TOKEN = "7550959777:AAHW_kUNZbtYbQJElyP42cmhPZE7FmuT_eY"

MOTIVATION_IMAGES = [
    "https://cs10.pikabu.ru/post_img/2020/02/13/3/158156287114946679.jpg",
    "https://i.pinimg.com/236x/ba/7e/5b/ba7e5ba04edbab51c6913462580df0f0.jpg",
    "https://i.pinimg.com/736x/fe/7f/74/fe7f74f8835c76afcfe1aa1705dbf43f.jpg",
]

# –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–æ–π
KEYBOARD = ReplyKeyboardMarkup([["–ü–æ–ª—É—á–∏—Ç—å –º–æ—Ç–∏–≤–∞—à–∫—É üöÄ"]], resize_keyboard=True)

async def start(update: Update, context: CallbackContext) -> None:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start."""
    await update.message.reply_text(
        "–ü—Ä–∏–≤–µ—Ç! –ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –º–æ—Ç–∏–≤–∞—à–∫—É!",
        reply_markup=KEYBOARD,
    )

async def send_motivation(update: Update, context: CallbackContext) -> None:
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É."""
    try:
        random_image_url = random.choice(MOTIVATION_IMAGES)
        await update.message.reply_photo(random_image_url, caption="–ù–∞–¥–æ —Ä–∞–±–æ—Ç–∞—Ç—å! üí™")
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ç–æ: {e}")
        await update.message.reply_text("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ")

async def handle_message(update: Update, context: CallbackContext) -> None:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π."""
    text = update.message.text.lower()
    if "–º–æ—Ç–∏–≤–∞" in text or "üöÄ" in text:
        await send_motivation(update, context)
    else:
        await update.message.reply_text("–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –º–æ—Ç–∏–≤–∞—à–∫—É!")

def main() -> None:
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞."""
    application = Application.builder().token(TOKEN).build()

    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    application.add_handler(CommandHandler("start", start))
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

    # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
    application.run_polling()

if __name__ == "__main__":
    main()
